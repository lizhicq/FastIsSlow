<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>component state</title>
</head>
<body>
	<!-- 准备好一个“容器” -->
	<div id="test"></div>
  <div id="test2"></div>
	
	<!-- 引入react核心库 -->
	<script type="text/javascript" src="../js/react.development.js"></script>
	<!-- 引入react-dom，用于支持react操作DOM -->
	<script type="text/javascript" src="../js/react-dom.development.js"></script>
	<!-- 引入babel，用于将jsx转为js -->
	<script type="text/javascript" src="../js/babel.min.js"></script>

	<script type="text/babel" >
  //1. create componet 
  class Weather extends React.Component{
    // how many times constructor is called = 1
    constructor(props){
      console.log('constructor');
      super(props)
      //init state
      this.state = {isHot:false, wind:'soft wind'}
      //resolve changeWeather this point issue
      this.changeWeather = this.changeWeather.bind(this)
    }
    // How many times render is called 
    render(){
      console.log('render')
      console.log('this',this)
      //read state
      const {isHot,wind} = this.state
      // this is instance for class here;
      return <h1 onClick={this.changeWeather}>Today's weather is {isHot ? 'hot':'cool'}, {wind}</h1>
    }

    // How many times changeWeather is called 
    changeWeather(){
      //changeWeather放在哪里？ ———— Weather的原型对象上，供实例使用
				//由于changeWeather是作为onClick的回调，所以不是通过实例调用的，是直接调用
				//类中的方法默认开启了局部的严格模式，所以changeWeather中的this为undefined
			console.log('changeWeather');
      const isHot = this.state.isHot 
      this.setState({isHot:!isHot})
      console.log('test this', this)
      //严重注意：状态(state)不可直接更改，下面这行就是直接更改！！！
			//this.state.isHot = !isHot //这是错误的写法
    }
  }

  class SimpleWeather extends React.Component{
    state = {isHot:false, wind:'微风'}
    render(){
      const{isHot,wind} = this.state
      return <h1 onClick={this.changeWeather}>今天天气很{isHot ? '炎热': '凉爽'}, {wind}</h1>
    }
    //自定义方法
    changeWeather = () =>{
      const isHot = this.state.isHot
      this.setState({isHot:!isHot})
    }
  }
  // render 
  ReactDOM.render(<Weather/>, document.getElementById('test'))
  ReactDOM.render(<SimpleWeather/>, document.getElementById('test2'))
  </script>
</body>
</html>